endpoint: https://jira.dev.bbc.co.uk
unixproxy: /usr/local/var/client-cert-proxy.sock
user: ben.wainwright@bbc.co.uk
project: ORBITEN
custom-commands:
  - name: search
    short: s
    help: Search JIRA for a given string
    script: |
      {{ jira }} list --query "text ~ \"{{args.TEXT}}\""
    args:
      - name: TEXT
        required: true

  - name: readyForDev
    short: r4d
    help: transition a ticket to ready for dev
    script: |
      {{jira}} transition "Ready for Dev" "$JIRA_PROJECT"-{{args.ISSUE}} --noedit
    args:
      - name: ISSUE
        required: true

  - name: devWip
    short: dw
    help: transition a ticket to dev wip
    script: |
      {{jira}} transition "Dev - WIP" "$JIRA_PROJECT"-{{args.ISSUE}} --noedit
    args:
      - name: ISSUE
        required: true

  - name: inReview
    short: ir
    help: transition a ticket to in review
    script: |
      {{jira}} transition "In Review" "$JIRA_PROJECT"-{{args.ISSUE}} --noedit
    args:
      - name: ISSUE
        required: true


  - name: readyToDeploy
    short: r2d
    help: transition a ticket to ready to deploy
    script: |
      {{jira}} transition "Ready to deploy" "$JIRA_PROJECT"-{{args.ISSUE}} --noedit
    args:
      - name: ISSUE
        required: true

  - name: onInt
    short: oi
    help: transition a ticket to on int
    script: |
      {{jira}} transition "On Int" "$JIRA_PROJECT"-{{args.ISSUE}} --noedit
    args:
      - name: ISSUE
        required: true

  - name: readyForTest
    short: r4t
    help: transition a ticket to ready for test
    script: |
      {{jira}} transition "Ready for Test" "$JIRA_PROJECT"-{{args.ISSUE}} --noedit
    args:
      - name: ISSUE
        required: true

  - name: testWip
    short: r4t
    help: transition a ticket to ready for test
    script: |
      {{jira}} transition "Test - WIP" "$JIRA_PROJECT"-{{args.ISSUE}} --noedit
    args:
      - name: ISSUE
        required: true

  - name: readyForRelease 
    short: r4r
    help: transition a ticket to ready for release
    script: |
      {{jira}} transition "Ready for release" "$JIRA_PROJECT"-{{args.ISSUE}} --noedit
    args:
      - name: ISSUE
        required: true

  - name: Done
    short: d
    help: transition a ticket to done 
    script: |
      {{jira}} transition "Done" "$JIRA_PROJECT"-{{args.ISSUE}} --noedit
    args:
      - name: ISSUE
        required: true

  - name: sprint
    help: display issues for active sprint
    script: |-
      if [ -n "$JIRA_PROJECT" ]; then
          # if `project: ...` configured just list the issues for current project
          {{jira}} list --template sprint --query "sprint in openSprints() and type != epic and project=$JIRA_PROJECT ORDER BY status asc" --queryfields=components,status,assignee,key,summary,priority
      else
          # otherwise list issues for all project
          echo "\"project: ...\" configuration missing from .jira.d/config.yml"
      fi 


